(this.webpackJsonpnear_city=this.webpackJsonpnear_city||[]).push([[0],{125:function(e,t,a){e.exports=a(156)},156:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),o=a(36),l=a.n(o),i=a(5),s=a.n(i),r=a(3),m=a(52),u=a.n(m),g=a(51),d=a.n(g),h=(a(130),a(8)),f=a.n(h),b=function(e){return Object(n.useEffect)((function(){s.a.send("VKWebAppStorageGet",{keys:["isSeenIntro1"]}).then((function(t){console.log(Object.values(t.keys[0])[1]),"true"===Object.values(t.keys[0])[1]?s.a.send("VKWebAppGetGeodata").then((function(t){isNaN(t.lat)?(console.log(t.lat),e.goToPage("Warning")):e.goToPage("Home")})).catch((function(t){console.log(t),e.goToPage("Warning")})):e.goToPage("Intro")})).catch((function(e){console.log(e)}))}),[]),c.a.createElement(f.a,{id:e.id,separator:!1},c.a.createElement("div",{className:"stage"},c.a.createElement("div",{className:"blockLoader"},c.a.createElement("div",{className:"titleLoader"},c.a.createElement("h1",null,"\u0418\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430.")),c.a.createElement("div",{className:"earthLoader"}))))},E=a(33),p=a.n(E),y=a(14),N=a.n(y),v=a(34),O=a.n(v),j=function(e){var t=Object(n.useState)(0),a=Object(r.a)(t,2),o=a[0],l=a[1],i=function(){console.log("sd"),l(1)};return c.a.createElement(f.a,{id:e.id,separator:!1},c.a.createElement("div",{className:"stage"},c.a.createElement(p.a,{slideWidth:"100%",style:{height:"100%"},bullets:"dark",slideIndex:o,onChange:i},c.a.createElement(O.a,null,c.a.createElement(N.a,{onClick:i,size:"xl"},"\u041f\u0440\u0438\u0441\u0442\u0443\u043f\u0438\u0442\u044c!")),c.a.createElement(O.a,null,c.a.createElement(N.a,{onClick:i,size:"xl",mode:"secondary"},"\u041f\u0440\u0438\u0441\u0442\u0443\u043f\u0438\u0442\u044c!")),c.a.createElement(O.a,null,c.a.createElement(N.a,{onClick:function(){e.goToPage("Loader"),s.a.send("VKWebAppStorageSet",{key:"isSeenIntro1",value:!0}).then((function(e){console.log(e)}))},size:"xl",mode:"secondary"},"\u041f\u0440\u0438\u0441\u0442\u0443\u043f\u0438\u0442\u044c!")))))},S=a(20),k=a(43),w=a.n(k),T=a(44),x=a.n(T),C=a(45),P=a.n(C),M=a(46),z=a.n(M),A=(a(35),function(e){return c.a.createElement(S.c,{id:e.id,separator:!1},c.a.createElement("div",{className:"stage"},c.a.createElement("div",{className:"sun"}),c.a.createElement("div",{className:"grass"}),c.a.createElement("div",{className:"title"},c.a.createElement("h1",{style:{color:"white",fontSize:45,fontFamily:"Neucha"}},"Town")),c.a.createElement(S.a,{className:"startButton",before:c.a.createElement(w.a,{style:{color:"white"}}),mode:"outline",size:"xl",onClick:function(){s.a.send("VKWebAppGetGeodata").then((function(t){isNaN(t.lat)?e.goToPage("Warning"):e.goToPage("Play")})).catch((function(t){console.log(t+" \u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0433\u0435\u043e\u0434\u0430\u043d\u043d\u044b\u0445"),e.goToPage("Warning")}))}},c.a.createElement("p",{style:{color:"white",fontSize:30,fontFamily:"Neucha"}},"\u0418\u0433\u0440\u0430\u0442\u044c!")),c.a.createElement("div",{className:"blockButton"},c.a.createElement(S.a,{className:"settingsButton",before:c.a.createElement(x.a,{width:41,height:41,style:{color:"white"}}),mode:"outline",size:"",onClick:function(){return e.goToPage("Settings")}}),c.a.createElement(S.a,{className:"ratingButton",before:c.a.createElement(P.a,{width:41,height:41,style:{color:"white"}}),mode:"outline",size:"",onClick:function(){return e.goToPage("Rating")}},c.a.createElement("p",{style:{color:"white",fontSize:30,fontFamily:"Neucha"}})),c.a.createElement(S.a,{className:"aboutButton",before:c.a.createElement(z.a,{width:41,height:41,style:{color:"white"}}),mode:"outline","data-to":"persik",size:"",onClick:function(){return e.goToPage("Info")}},c.a.createElement("p",{style:{color:"white",fontSize:30,fontFamily:"Neucha"}})))))}),W=a(17),F=a.n(W),I=a(18),V=a.n(I),_=a(48),G=a.n(_),B=a(47),K=a.n(B),L=[[["city","\u0423\u0444\u0430"],["lat",54.7431],["long",55.9678]],[["city","\u0428\u0430\u043d\u0445\u0430\u0439"],["lat",31.23042],["long",121.4737]],[["city","\u041c\u0435\u0445\u0438\u043a\u043e"],["lat",19.4285],["long",-99.1277]],[["city","\u0421\u0430\u043d-\u041f\u0430\u0443\u043b\u0443"],["lat",-23.55052],["long",-46.63331]],[["city","\u041a\u0430\u0438\u0440"],["lat",30.0626],["long",31.2497]],[["city","\u041c\u0443\u043c\u0431\u0430\u0438"],["lat",19.07598],["long",72.87766]],[["city","\u0414\u0430\u043a\u043a\u0430"],["lat",23.81033],["long",90.41252]],[["city","\u041e\u0441\u0430\u043a\u0430"],["lat",34.6812515],["long",135.5314026]],[["city","\u041a\u0430\u0440\u0430\u0447\u0438"],["lat",24.86146],["long",67.00994]],[["city","\u0421\u0442\u0430\u043c\u0431\u0443\u043b"],["lat",41.0138],["long",28.9497]],[["city","\u041c\u043e\u0441\u043a\u0432\u0430"],["lat",55.7522],["long",37.6156]]],H=[[["city","\u0423\u0444\u0430"],["lat",54.7431],["long",55.9678]],[["city","\u0428\u0430\u043d\u0445\u0430\u0439"],["lat",31.23042],["long",121.4737]],[["city","\u041c\u0435\u0445\u0438\u043a\u043e"],["lat",19.4285],["long",-99.1277]],[["city","\u0421\u0430\u043d-\u041f\u0430\u0443\u043b\u0443"],["lat",-23.55052],["long",-46.63331]],[["city","\u041a\u0430\u0438\u0440"],["lat",30.0626],["long",31.2497]],[["city","\u041c\u0443\u043c\u0431\u0430\u0438"],["lat",19.07598],["long",72.87766]],[["city","\u0414\u0430\u043a\u043a\u0430"],["lat",23.81033],["long",90.41252]],[["city","\u041e\u0441\u0430\u043a\u0430"],["lat",34.6812515],["long",135.5314026]],[["city","\u041a\u0430\u0440\u0430\u0447\u0438"],["lat",24.86146],["long",67.00994]],[["city","\u0421\u0442\u0430\u043c\u0431\u0443\u043b"],["lat",41.0138],["long",28.9497]],[["city","\u041c\u043e\u0441\u043a\u0432\u0430"],["lat",55.7522],["long",37.6156]]],J=function(e){var t=Object(n.useState)(" "),a=Object(r.a)(t,2),o=a[0],l=a[1],i=Object(n.useState)(" "),m=Object(r.a)(i,2),u=m[0],g=m[1],d=Object(n.useState)(100),h=Object(r.a)(d,2),b=h[0],E=h[1],p=Object(n.useState)(),y=Object(r.a)(p,2),v=y[0],O=y[1],j=Object(n.useState)(" "),S=Object(r.a)(j,2),k=S[0],w=S[1],T=Object(n.useState)(" "),x=Object(r.a)(T,2),C=x[0],P=x[1],M=Object(n.useState)(0),z=Object(r.a)(M,2),A=z[0],W=z[1],I=Object(n.useState)(0),_=Object(r.a)(I,2),B=_[0],J=_[1],R=Object(n.useState)("stage"),q=Object(r.a)(R,2),D=q[0],U=q[1],Q=Object(n.useState)(!1),X=Object(r.a)(Q,2),Y=X[0],Z=X[1],$=Object(n.useState)(!1),ee=Object(r.a)($,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(!1),ce=Object(r.a)(ne,2),oe=ce[0],le=ce[1],ie=Object(n.useState)("timer"),se=Object(r.a)(ie,2),re=se[0],me=se[1],ue=Object(n.useState)("progressNone"),ge=Object(r.a)(ue,2),de=ge[0],he=ge[1],fe=Object(n.useState)("result"),be=Object(r.a)(fe,2),Ee=be[0],pe=be[1],ye=Object(n.useState)(),Ne=Object(r.a)(ye,2),ve=Ne[0],Oe=Ne[1],je=Object(n.useState)(!1),Se=Object(r.a)(je,2),ke=(Se[0],Se[1]),we=Object(n.useState)(c.a.createElement("br",null)),Te=Object(r.a)(we,2),xe=Te[0],Ce=Te[1],Pe=Object(n.useState)(" "),Me=Object(r.a)(Pe,2),ze=(Me[0],Me[1],Object(n.useState)(null)),Ae=Object(r.a)(ze,2);Ae[0],Ae[1];Object(n.useEffect)((function(){We(),!1===oe&&le(!0)}),[]);var We=function(){O(),me("timer"),he("progress"),pe("resultNone"),U("stage"),ae(!1),Z(!1),P(),w(),O(),s.a.send("VKWebAppGetGeodata").then((function(t){var a={lat:t.lat,lon:t.long,count:1},n={method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token 8542806bad4af5ebade0e922834e3e32cd380a2a"},body:JSON.stringify(a)};isNaN(t.lat)&&e.goToPage("Warning"),fetch("https://suggestions.dadata.ru/suggestions/api/4_1/rs/geolocate/address",n).then((function(e){return e.text()})).then((function(e){var t=Object.values(Object.entries(JSON.parse(e))[0][1][0])[0];Ce(t)})).catch((function(e){Ce("\u0428\u0438\u0440\u043e\u0442\u0430 "+t.lat+", \u0414\u043e\u043b\u0433\u043e\u0442\u0430 "+t.long)}))})).catch((function(e){}));var t=setInterval((function(){var e=Math.floor(Math.random()*H.length),t=Math.floor(Math.random()*L.length),a=Object.fromEntries(L[t]),n=Object.fromEntries(H[e]);g(n.city),l(a.city)}),60);setTimeout((function(){clearInterval(t),Fe(),Z(!0)}),3e3)},Fe=function(){var e=Math.floor(Math.random()*H.length),t=Object.fromEntries(H[e]),a=Math.floor(Math.random()*L.length),n=Object.fromEntries(L[a]);g(t.city),l(n.city),s.a.send("VKWebAppGetGeodata").then((function(e){var a={lat:e.lat,lon:e.long,count:1},c={method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token 8542806bad4af5ebade0e922834e3e32cd380a2a"},body:JSON.stringify(a)};function o(e,t,a,n){var c=l(a-e),o=l(n-t),i=Math.sin(c/2)*Math.sin(c/2)+Math.cos(l(e))*Math.cos(l(a))*Math.sin(o/2)*Math.sin(o/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))}function l(e){return e*(Math.PI/180)}function i(e,t,a,n){var c=l(a-e),o=l(n-t),i=Math.sin(c/2)*Math.sin(c/2)+Math.cos(l(e))*Math.cos(l(a))*Math.sin(o/2)*Math.sin(o/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))}function l(e){return e*(Math.PI/180)}fetch("https://suggestions.dadata.ru/suggestions/api/4_1/rs/geolocate/address",c).then((function(e){return e.text()})).then((function(e){var t=Object.values(Object.entries(JSON.parse(e))[0][1][0])[0];Ce(t)})).catch((function(t){Ce("\u0428\u0438\u0440\u043e\u0442\u0430 "+e.lat+", \u0414\u043e\u043b\u0433\u043e\u0442\u0430 "+e.long)})),J(+o(e.lat,e.long,t.lat,t.long).toFixed(0)),W(+i(e.lat,e.long,n.lat,n.long).toFixed(0));var s=100,r=4,m=setInterval((function(){E(s-=20),O("\u041e\u0441\u0442\u0430\u043b\u043e\u0441\u044c "+r--+" \u0441\u0435\u043a"),0===s&&O("\u041d\u0435 \u0443\u0441\u043f\u0435\u043b\u0438!")}),1e3);setTimeout((function(){ae(!0),le(!1),clearInterval(m),E(100),P(o(e.lat,e.long,t.lat,t.long).toFixed(0)+" \u043a\u043c"),w(i(e.lat,e.long,n.lat,n.long).toFixed(0)+" \u043a\u043c")}),5e3)}))};return c.a.createElement(f.a,{id:e.id,separator:!1},c.a.createElement(F.a,{left:c.a.createElement(V.a,{onClick:function(){return window.history.back()}})}),c.a.createElement("div",{className:D},c.a.createElement("div",{className:"topBlock"},c.a.createElement("div",{className:"titlePlay"},c.a.createElement("h1",{style:{color:"white",fontSize:35,fontFamily:"Neucha"}},"\u041a\u0430\u043a\u043e\u0439 \u0433\u043e\u0440\u043e\u0434 ",c.a.createElement("br",null)," \u0431\u043b\u0438\u0436\u0435?")),c.a.createElement(K.a,{className:"iconPlace",width:25,height:25}),c.a.createElement("div",{className:"earth"}),c.a.createElement("div",{className:"userCityName"},c.a.createElement("h1",{style:{color:"white",fontSize:15,fontFamily:"Neucha",textAlign:"center"}},xe))),c.a.createElement("div",{className:"blockCities"},c.a.createElement("div",{className:"cityDivLeft"},c.a.createElement(N.a,{className:"cityButtonLeft",onClick:function(){!1===te&&!0===Y&&(A<B?(U("stageSucces"),Oe("\u0412\u0435\u0440\u043d\u043e!"),setTimeout((function(){U("stage")}),2e3)):(Oe("\u041d\u0435\u0432\u0435\u0440\u043d\u043e!"),U("stageError"),setTimeout((function(){U("stage")}),2e3)),P(B.toFixed(0)+" \u043a\u043c"),w(A.toFixed(0)+" \u043a\u043c"),ae(!0),ke(!0),me("timerNone"),he("progressNone"),pe("result"))},size:"l",mode:"outline",style:{color:"white",fontFamily:"Neucha",textAlign:"center"}},c.a.createElement("h1",null,o,c.a.createElement("br",null),k))),c.a.createElement("div",{className:"cityDivRight"},c.a.createElement(N.a,{className:"cityButtonRight",onClick:function(){!1===te&&!0===Y&&(A>B?(Oe("\u0412\u0435\u0440\u043d\u043e!"),U("stageSucces"),setTimeout((function(){U("stage")}),2e3)):(U("stageError"),Oe("\u041d\u0435\u0432\u0435\u0440\u043d\u043e!"),setTimeout((function(){U("stage")}),2e3)),P(B.toFixed(0)+" \u043a\u043c"),w(A.toFixed(0)+" \u043a\u043c"),ae(!0),ke(!0),me("timerNone"),he("progressNone"),pe("result"))},size:"l",mode:"outline",style:{color:"white",fontFamily:"Neucha",textAlign:"center"}},c.a.createElement("h1",null,u,c.a.createElement("br",null),C)))),c.a.createElement("div",{className:"blockProgress"},c.a.createElement("div",{className:"progressItems"},c.a.createElement("div",{className:Ee},c.a.createElement("h1",{style:{color:"white",fontSize:30,fontFamily:"Neucha",textAlign:"center"}},ve)),c.a.createElement("div",{className:de},c.a.createElement(G.a,{style:{background:"red"},value:b}),c.a.createElement("div",{className:re},c.a.createElement("h1",{style:{color:"white",fontSize:30,fontFamily:"Neucha",textAlign:"center"}},v))),c.a.createElement("div",{className:"nextDivLevel"},c.a.createElement(N.a,{className:"nextButtonLevel",onClick:function(){!1===oe&&(le(!0),We())},size:"l",mode:"outline",style:{color:"white",fontFamily:"Neucha",textAlign:"center"}},c.a.createElement("h1",null,"\u0414\u0430\u043b\u044c\u0448\u0435")))))))},R=a(30),q=a.n(R),D=function(e){return c.a.createElement(f.a,{id:e.id,separator:!1},c.a.createElement(F.a,{left:c.a.createElement(V.a,{onClick:function(){return window.history.back()}})},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),c.a.createElement(q.a,{className:"stage"}))},U=function(e){return c.a.createElement(f.a,{id:e.id,separator:!1},c.a.createElement(F.a,{left:c.a.createElement(V.a,{onClick:function(){return window.history.back()}})},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"),c.a.createElement("div",{className:"stage"}))},Q=function(e){return c.a.createElement(f.a,{id:e.id,separator:!1},c.a.createElement(F.a,{left:c.a.createElement(V.a,{onClick:function(){return window.history.back()}})},"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"),c.a.createElement("div",{className:"stage"}))},X=(a(151),a(49)),Y=a.n(X),Z=a(50),$=a.n(Z),ee=function(e){var t=Object(n.useState)(null),a=Object(r.a)(t,2),o=a[0],l=a[1],i=Object(n.useState)(),m=Object(r.a)(i,2),u=m[0],g=m[1];return c.a.createElement(f.a,{id:e.id,separator:!1},c.a.createElement(F.a,{left:c.a.createElement(V.a,{onClick:function(){return window.history.back()}})}),c.a.createElement("div",{className:"stage"},c.a.createElement("div",{className:"titleGeoCheck"},c.a.createElement("h3",null,"\u0414\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f, \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0441\u043b\u0443\u0436\u0431\u044b \u0433\u0435\u043e\u043b\u043e\u043a\u0430\u0446\u0438\u0438 \u043d\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0435.")),c.a.createElement("div",{className:"popout"},c.a.createElement(p.a,{slideWidth:"100%",align:"center",bullets:"dark",style:{height:350,borderRadius:"55px 55px 0px 0px"}},c.a.createElement("img",{src:Y.a}),c.a.createElement("img",{src:$.a})),c.a.createElement("p",{className:"textPopout"},o)),c.a.createElement("div",null),c.a.createElement("div",{className:"geoCheckDiv"},c.a.createElement(N.a,{mode:"outline",size:"xl",onClick:function(){l(c.a.createElement("div",{className:"earthPop"})),s.a.send("VKWebAppGetGeodata").then((function(t){g(t.lat),console.log(t.lat),isNaN(t.lat)?(console.log("\u043d\u0435 \u043f\u043e\u043b\u0443"),l("\u0414\u0430\u043d\u043d\u044b\u0435 \u0433\u0435\u043e\u043f\u043e\u0437\u0438\u0446\u0438\u0438 \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0435 \u0440\u0430\u0437."),setTimeout((function(){l()}),1500)):(e.goToPage("Home"),console.log("\u043f\u043e\u043b\u0443\u0447"),l())})).catch((function(e){l("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a.")})),isNaN(u)?console.log("\u043d\u0435 \u043f\u043e\u043b\u0443"):(e.goToPage("Home"),console.log("\u043f\u043e\u043b\u0443\u0447"))}},"\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u0442\u044c \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435"))))},te=["bright_light","client_light"],ae=function(){var e=Object(n.useState)("Home"),t=Object(r.a)(e,2),a=t[0],o=t[1],l=Object(n.useState)(["Home"]),i=Object(r.a)(l,2),m=i[0];i[1];function g(e){window.history.pushState({panel:e},e),o(e),m.push(e)}var h=function(){1===m.length?s.a.send("VKWebAppClose",{status:"success"}):m.length>1&&(m.pop(),o(m[m.length-1]))};Object(n.useEffect)((function(){s.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;"VKWebAppUpdateConfig"===a&&N(n.scheme)})),window.addEventListener("popstate",(function(){return h()}))}),[]);var f=Object(n.useState)("space_gray"),E=Object(r.a)(f,2),p=E[0],y=E[1];function N(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=te.includes(e);t&&(a=!a),y(a?"bright_light":"space_gray"),s.a.send("VKWebAppSetViewSettings",{status_bar_style:a?"dark":"light",action_bar_color:a?"#ffffff":"#191919"})}return c.a.createElement(d.a,{isWebView:!0,scheme:p},c.a.createElement(u.a,{activePanel:a,history:m,scheme:p,onSwipeBack:h},c.a.createElement(b,{id:"Loader",goToPage:g,scheme:p,camelCase:N}),c.a.createElement(j,{id:"Intro",goToPage:g,scheme:p,camelCase:N}),c.a.createElement(A,{id:"Home",goToPage:g,camelCase:N,scheme:p}),c.a.createElement(J,{id:"Play",goToPage:g,scheme:p,camelCase:N}),c.a.createElement(D,{id:"Settings",camelCase:N,scheme:p}),c.a.createElement(U,{id:"Rating"}),c.a.createElement(Q,{id:"Info"}),c.a.createElement(ee,{scheme:p,camelCase:N,id:"Warning",goToPage:g})))},ne=a(53),ce=a.n(ne);s.a.send("VKWebAppInit",{});var oe=document.getElementById("root");Object(S.d)()===S.b&&ce()(oe),l.a.render(c.a.createElement(ae,null),oe)},35:function(e,t,a){},49:function(e,t,a){e.exports=a.p+"static/media/ios.97d605fc.png"},50:function(e,t,a){e.exports=a.p+"static/media/android.b50cc2b3.png"}},[[125,1,2]]]);
//# sourceMappingURL=main.5da44a78.chunk.js.map