(this.webpackJsonpnear_city=this.webpackJsonpnear_city||[]).push([[0],{133:function(e,t,a){e.exports=a(164)},164:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(32),o=a.n(l),i=a(2),r=a.n(i),s=a(8),u=a(48),m=a.n(u),h=a(47),g=a.n(h),f=(a(138),a(4)),d=a.n(f),y=a(5),E=a.n(y),b=a(3),p=a.n(b),v=a(40),w=a.n(v),N=a(41),O=a.n(N),j=a(42),C=a.n(j),S=a(43),M=a.n(S),k=(a(36),function(e){return c.a.createElement(d.a,{id:e.id,separator:!1},c.a.createElement(E.a,null,"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"),c.a.createElement("div",{className:"stage"},c.a.createElement("div",{className:"sun"}),c.a.createElement("div",{className:"grass"}),c.a.createElement("h1",{style:{color:"white",fontSize:45,fontFamily:"Neucha"}},"Town"),c.a.createElement(p.a,{before:c.a.createElement(w.a,{style:{color:"white"}}),mode:"outline",size:"xl",onClick:function(){r.a.send("VKWebAppGetGeodata").then((function(t){isNaN(t.lat)?e.goToPage("Warning"):(e.startGame(),e.goToPage("Play"))}))}},c.a.createElement("p",{style:{color:"white",fontSize:30,fontFamily:"Neucha"}},"\u0418\u0433\u0440\u0430\u0442\u044c!")),c.a.createElement(p.a,{className:"Settings",before:c.a.createElement(O.a,{width:40,height:40,style:{color:"white"}}),mode:"outline",size:"",onClick:function(){return e.goToPage("Settings")}}),c.a.createElement(p.a,{className:"Rating",before:c.a.createElement(C.a,{width:40,height:40,style:{color:"white"}}),mode:"outline",size:"",onClick:function(){return e.goToPage("Rating")}},c.a.createElement("p",{style:{color:"white",fontSize:30,fontFamily:"Neucha"}})),c.a.createElement(p.a,{className:"About",before:c.a.createElement(M.a,{width:40,height:40,style:{color:"white"}}),mode:"outline","data-to":"persik",size:"",onClick:function(){return e.goToPage("Info")}},c.a.createElement("p",{style:{color:"white",fontSize:30,fontFamily:"Neucha"}}))))}),A=a(7),P=a.n(A),z=a(45),T=a.n(z),x=a(46),G=a.n(x),_=a(44),F=a.n(_),W=function(e){var t=function(){e.userResponse()};return c.a.createElement(d.a,{id:e.id,separator:!1},c.a.createElement(E.a,{left:c.a.createElement(P.a,{onClick:function(){return window.history.back()}})},"Play"),c.a.createElement("div",{className:"stage"},c.a.createElement("h1",{style:{color:"white",fontSize:45,fontFamily:"Neucha",textAlign:"center"}},"\u041a\u0430\u043a\u043e\u0439 \u0433\u043e\u0440\u043e\u0434 ",c.a.createElement("br",null)," \u0431\u043b\u0438\u0436\u0435?"),c.a.createElement(F.a,{className:"iconPlace",width:50,height:50}),c.a.createElement("div",{className:"userCityName"},c.a.createElement("h1",{style:{color:"white",fontSize:15,fontFamily:"Neucha",textAlign:"center"}},e.geoUser)),c.a.createElement(p.a,{onClick:function(){return t()},className:"cityButtonLeft",size:"l",mode:"outline",style:{color:"white",fontFamily:"Neucha",textAlign:"center"}},c.a.createElement("h1",null,e.leftCity,c.a.createElement("br",null),e.leftCityDictance)),c.a.createElement(p.a,{onClick:function(){return t()},className:"cityButtonRight",size:"l",mode:"outline",style:{color:"white",fontFamily:"Neucha",textAlign:"center"}},c.a.createElement("h1",null,e.rightCity,c.a.createElement("br",null),e.rightCityDictance)),c.a.createElement("h1",{className:"timer"},e.timer),c.a.createElement(T.a,{className:"progress"},c.a.createElement(G.a,{style:{background:"red"},value:e.count})),c.a.createElement(p.a,{onClick:function(){e.startGame()},className:"nextLevelButton",size:"l",mode:"outline",style:{color:"white",fontFamily:"Neucha",textAlign:"center"}},c.a.createElement("h1",null,"\u0414\u0430\u043b\u044c\u0448\u0435"))))},I=a(28),V=a.n(I),K=function(e){return c.a.createElement(d.a,{id:e.id,separator:!1},c.a.createElement(E.a,{left:c.a.createElement(P.a,{onClick:function(){return window.history.back()}})},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),c.a.createElement("div",{className:"stage"}),c.a.createElement(V.a,null,c.a.createElement(p.a,{style:{color:"white",border:"1px solid white"},onClick:function(){return e.camelCase(e.scheme,!0)},size:"xl",mode:"outline"},"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0442\u0435\u043c\u0443 \u043d\u0430 \u0430\u043b\u044c\u0442\u0435\u0440\u043d\u0430\u0442\u0438\u0432\u043d\u0443\u044e")))},B=function(e){return c.a.createElement(d.a,{id:e.id,separator:!1},c.a.createElement(E.a,{left:c.a.createElement(P.a,{onClick:function(){return window.history.back()}})},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433"),c.a.createElement("div",{className:"stage"}))},J=function(e){return c.a.createElement(d.a,{id:e.id,separator:!1},c.a.createElement(E.a,{left:c.a.createElement(P.a,{onClick:function(){return window.history.back()}})},"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"),c.a.createElement("div",{className:"stage"}))},R=function(e){return c.a.createElement(d.a,{id:e.id,separator:!1},c.a.createElement(E.a,{left:c.a.createElement(P.a,{onClick:function(){return window.history.back()}})},"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435"),c.a.createElement("div",{className:"stage"}),c.a.createElement(p.a,{onClick:function(){r.a.send("VKWebAppGetGeodata").then((function(t){isNaN(t.lat)?console.log("\u041d\u0435 \u043c\u043e\u0436\u0435\u043c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"):(e.goToPage("Play"),e.startGame())}))},className:"nextLevelButton"},"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c GPS"))},q=["bright_light","client_light"],D=function(){var e=Object(n.useState)("Home"),t=Object(s.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(["Home"]),i=Object(s.a)(o,2),u=i[0],h=(i[1],Object(n.useState)(100)),f=Object(s.a)(h,2),d=f[0],y=f[1],E=Object(n.useState)(),b=Object(s.a)(E,2),p=b[0],v=b[1],w=Object(n.useState)(),N=Object(s.a)(w,2),O=N[0],j=N[1],C=Object(n.useState)(),S=Object(s.a)(C,2),M=S[0],A=S[1],P=Object(n.useState)(),z=Object(s.a)(P,2),T=z[0],x=z[1],G=Object(n.useState)(),_=Object(s.a)(G,2),F=_[0],I=_[1],V=Object(n.useState)(),D=Object(s.a)(V,2),L=D[0],H=D[1];var U=function(){v(""),y(100),I(),x(),1===u.length?r.a.send("VKWebAppClose",{status:"success"}):u.length>1&&(u.pop(),l(u[u.length-1]))};Object(n.useEffect)((function(){r.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;"VKWebAppUpdateConfig"===a&&$(n.scheme)})),window.addEventListener("popstate",(function(){return U()}))}),[]);var Q=Object(n.useState)("bright_light"),X=Object(s.a)(Q,2),Y=X[0],Z=X[1];function $(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=q.includes(e);t&&(a=!a),Z(a?"bright_light":"space_gray"),r.a.send("VKWebAppSetViewSettings",{status_bar_style:a?"dark":"light",action_bar_color:a?"#ffffff":"#191919"})}var ee=[[["city","\u0423\u0444\u0430"],["lat",54.7431],["long",55.9678]],[["city","\u0428\u0430\u043d\u0445\u0430\u0439"],["lat",31.23042],["long",121.4737]],[["city","\u041c\u0435\u0445\u0438\u043a\u043e"],["lat",19.4285],["long",-99.1277]],[["city","\u0421\u0430\u043d-\u041f\u0430\u0443\u043b\u0443"],["lat",-23.55052],["long",-46.63331]],[["city","\u041a\u0430\u0438\u0440"],["lat",30.0626],["long",31.2497]],[["city","\u041c\u0443\u043c\u0431\u0430\u0438"],["lat",19.07598],["long",72.87766]],[["city","\u0414\u0430\u043a\u043a\u0430"],["lat",23.81033],["long",90.41252]],[["city","\u041e\u0441\u0430\u043a\u0430"],["lat",34.6812515],["long",135.5314026]],[["city","\u041a\u0430\u0440\u0430\u0447\u0438"],["lat",24.86146],["long",67.00994]],[["city","\u0421\u0442\u0430\u043c\u0431\u0443\u043b"],["lat",41.0138],["long",28.9497]],[["city","\u041c\u043e\u0441\u043a\u0432\u0430"],["lat",55.7522],["long",37.6156]]],te=[[["city","\u0423\u0444\u0430"],["lat",54.7431],["long",55.9678]],[["city","\u0428\u0430\u043d\u0445\u0430\u0439"],["lat",31.23042],["long",121.4737]],[["city","\u041c\u0435\u0445\u0438\u043a\u043e"],["lat",19.4285],["long",-99.1277]],[["city","\u0421\u0430\u043d-\u041f\u0430\u0443\u043b\u0443"],["lat",-23.55052],["long",-46.63331]],[["city","\u041a\u0430\u0438\u0440"],["lat",30.0626],["long",31.2497]],[["city","\u041c\u0443\u043c\u0431\u0430\u0438"],["lat",19.07598],["long",72.87766]],[["city","\u0414\u0430\u043a\u043a\u0430"],["lat",23.81033],["long",90.41252]],[["city","\u041e\u0441\u0430\u043a\u0430"],["lat",34.6812515],["long",135.5314026]],[["city","\u041a\u0430\u0440\u0430\u0447\u0438"],["lat",24.86146],["long",67.00994]],[["city","\u0421\u0442\u0430\u043c\u0431\u0443\u043b"],["lat",41.0138],["long",28.9497]],[["city","\u041c\u043e\u0441\u043a\u0432\u0430"],["lat",55.7522],["long",37.6156]]];function ae(){r.a.send("VKWebAppGetGeodata").then((function(e){var t={lat:e.lat,lon:e.long,count:1},a={method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token 8542806bad4af5ebade0e922834e3e32cd380a2a"},body:JSON.stringify(t)};fetch("https://suggestions.dadata.ru/suggestions/api/4_1/rs/geolocate/address",a).then((function(e){return e.text()})).then((function(e){var t=Object.values(Object.entries(JSON.parse(e))[0][1][0])[0];H(t)})).catch((function(t){H("\u0428\u0438\u0440\u043e\u0442\u0430 "+e.lat+", \u0414\u043e\u043b\u0433\u043e\u0442\u0430 "+e.long)}))})).catch((function(e){}));var e=setInterval((function(){var e=Math.floor(Math.random()*te.length),t=Math.floor(Math.random()*ee.length),a=Object.fromEntries(ee[t]),n=Object.fromEntries(te[e]);A(n.city),j(a.city)}),60);setTimeout((function(){clearInterval(e),function(){var e=Math.floor(Math.random()*te.length),t=Object.fromEntries(te[e]),a=Math.floor(Math.random()*ee.length),n=Object.fromEntries(ee[a]);A(t.city),j(n.city),r.a.send("VKWebAppGetGeodata").then((function(e){var a={lat:e.lat,lon:e.long,count:1},c={method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token 8542806bad4af5ebade0e922834e3e32cd380a2a"},body:JSON.stringify(a)};function l(e){return e*(Math.PI/180)}function l(e){return e*(Math.PI/180)}fetch("https://suggestions.dadata.ru/suggestions/api/4_1/rs/geolocate/address",c).then((function(e){return e.text()})).then((function(e){var t=Object.values(Object.entries(JSON.parse(e))[0][1][0])[0];H(t)})).catch((function(t){H("\u0428\u0438\u0440\u043e\u0442\u0430 "+e.lat+", \u0414\u043e\u043b\u0433\u043e\u0442\u0430 "+e.long)}));var o=100,i=4,r=setInterval((function(){y(o-=20),v("\u041e\u0441\u0442\u0430\u043b\u043e\u0441\u044c "+i--+" \u0441\u0435\u043a")}),1e3);setTimeout((function(){clearInterval(r),v(),y(100),I(function(e,t,a,n){var c=l(a-e),o=l(n-t),i=Math.sin(c/2)*Math.sin(c/2)+Math.cos(l(e))*Math.cos(l(a))*Math.sin(o/2)*Math.sin(o/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))}(e.lat,e.long,t.lat,t.long).toFixed(0)+" \u043a\u043c"),x(function(e,t,a,n){var c=l(a-e),o=l(n-t),i=Math.sin(c/2)*Math.sin(c/2)+Math.cos(l(e))*Math.cos(l(a))*Math.sin(o/2)*Math.sin(o/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))}(e.lat,e.long,n.lat,n.long).toFixed(0)+" \u043a\u043c")}),5e3)}))}()}),3e3)}return c.a.createElement(g.a,{isWebView:!0,scheme:Y},c.a.createElement(m.a,{activePanel:a,history:u,onSwipeBack:U},c.a.createElement(k,{id:"Home",goToPage:function(e){window.history.pushState({panel:e},e),l(e),u.push(e)},startGame:ae,camelCase:$,scheme:Y}),c.a.createElement(W,{id:"Play",startGame:ae,leftCityDictance:T,rightCityDictance:F,leftCity:O,rightCity:M,count:d,geoUser:L,timer:p,userResponse:function(){v(),y(100)}}),c.a.createElement(K,{id:"Settings",camelCase:$,scheme:Y}),c.a.createElement(B,{id:"Rating"}),c.a.createElement(J,{id:"Info"}),c.a.createElement(R,{id:"Warning"})))},L=a(49),H=a.n(L),U=a(33);r.a.send("VKWebAppInit",{});var Q=document.getElementById("root");Object(U.b)()===U.a&&H()(Q),o.a.render(c.a.createElement(D,null),Q)},36:function(e,t,a){}},[[133,1,2]]]);
//# sourceMappingURL=main.1dbce362.chunk.js.map